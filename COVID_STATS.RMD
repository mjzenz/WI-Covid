---
title: "WI Covid-19 Stats"
output: html_document
---

```{r setup, include=FALSE, echo = FALSE}
knitr::opts_chunk$set(echo = FALSE)
```



```{r process, echo=FALSE, message=FALSE, warning=FALSE, results = "hide"}
MIN_DATE_INTERVAL <- -3
source("WI_COVID_DATA_PROCESS.R")
Date_lims <- as.Date(c(MAX_DATE %m+% months(MIN_DATE_INTERVAL), MAX_DATE),  "%Y-%m-%d")

```


This document contains confirmed Covid-19 cases, hospitalizations, and deaths in Wisconsin as of `r format(MAX_DATE, format = "%A %B %d, %Y")`.  Unless otherwise specified all data is for the past 3 months 

# {.tabset}


## State-wide

### Last 3 Months

```{r NEW_DEATHS_STATE, echo=FALSE, warning=FALSE}

PLOT <- ggplot(STATEWIDE_VALUES, aes(Date))
PLOT  + geom_line(aes(y = AVG_7_CHANGE_DEATHS), color = "black") + 
  geom_point(aes(y = CHANGE_DEATHS),color = "red", fill = "red") +  
  geom_point(aes(y = MAX_DEATHS), fill = "blue" ,color = "blue") + 
  scale_x_date(limits = Date_lims) +
  labs(y = "", title  = "Daily WI Covid-19 Deaths, Last 3 Months", subtitle =  "7-day AVG in black, today's value in blue") 

```


```{r NEW_HOSP_STATE, echo=FALSE, warning=FALSE}

PLOT <- ggplot(STATEWIDE_VALUES, aes(Date))
PLOT  + geom_line(aes(y = AVG_7_CHANGE_HOSP), color = "black") + 
  geom_point(aes(y = CHANGE_HOSP),color = "red", fill = "red") +  
  geom_point(aes(y = MAX_HOSP), fill = "blue" ,color = "blue")  + 
  scale_x_date(limits = Date_lims) +
  labs(y = "", title  = "New WI Covid-19 Hospitalizations, Last 3 Months", subtitle = "7-day AVG in black, today's value in blue") 

```



```{r NEW_CASES_HOSP_DEATH, echo=FALSE, warning=FALSE}

PLOT <- ggplot(STATEWIDE_VALUES, aes(Date))
PLOT  + geom_line(aes(y = AVG_7_CHANGE_DEATHS_percent), color = "red") + 
  geom_line(aes(y = AVG_7_CHANGE_HOSP_percent), color = "yellow") +
  geom_line(aes(y = AVG_7_CHANGE_POS_percent), color = "black") + 
  scale_x_date(limits = Date_lims) +
  labs(y = "", title  = "7-day AVG of Cases, Hosp., and Deaths") 

```






### All Data



```{r NEW_DEATHS_STATE_ALL, echo=FALSE, warning=FALSE}

PLOT <- ggplot(STATEWIDE_VALUES, aes(Date))
PLOT  + geom_line(aes(y = AVG_7_CHANGE_DEATHS), color = "black") + 
  geom_point(aes(y = CHANGE_DEATHS),color = "red", fill = "red") +  
  geom_point(aes(y = MAX_DEATHS), fill = "blue" ,color = "blue") + 
  #scale_x_date(limits = Date_lims) +
  labs(y = "", title  = "Daily WI Covid-19 Deaths", subtitle =  "7-day AVG in black, today's value in blue") 

```


```{r NEW_HOSP_STATE_ALL, echo=FALSE, warning=FALSE}

PLOT <- ggplot(STATEWIDE_VALUES, aes(Date))
PLOT  + geom_line(aes(y = AVG_7_CHANGE_HOSP), color = "black") + 
  geom_point(aes(y = CHANGE_HOSP),color = "red", fill = "red") +  
  geom_point(aes(y = MAX_HOSP), fill = "blue" ,color = "blue")  + 
  #scale_x_date(limits = Date_lims) +
  labs(y = "", title  = "New WI Covid-19 Hospitalizations" , subtitle =  "7-day AVG in black, today's value in blue") 

```



## Regions 
[See WI DHS for Region Definitions](https://www.dhs.wisconsin.gov/aboutdhs/regions.htm)

```{r NEW_AVG_REGION, echo=FALSE, warning=FALSE}

PLOT <- ggplot(REGION_VALUES, aes(x = Date, y = AVG_7_CHANGE_POS))
PLOT + geom_line(aes(color = REGION, group = REGION)) + labs(y = "", title  = "New  Covid-19 Cases (7-day trailing average)") 
```


&nbsp;

```{r NEW_TOTAL_REGION, echo=FALSE, warning=FALSE}

PLOT <- ggplot(REGION_VALUES, aes(fill = REGION, x = Date, y = CHANGE_POS))
PLOT + geom_bar(position = "stack", stat = "identity") + labs(y = "", title  = "New Daily Covid-19 Cases") 
```


&nbsp;



```{r REGION_TOTAL, echo=FALSE, warning=FALSE}


PLOT <- ggplot(REGION_VALUES, aes(Date, POSITIVE))
PLOT + geom_line(aes(color = REGION, group = REGION)) + scale_y_log10() + labs(y = "", title  = "Total Covid-19 Cases (Log Scale)")
```


&nbsp;


```{r REGION_PER, echo=FALSE, warning=FALSE}
PLOT <- ggplot(REGION_VALUES, aes(Date, REGION_POSITIVE_PER_THOUS))

PLOT + geom_line(aes(color = REGION, group = REGION)) +  labs(y = "", title = "Total Covid-19 Cases per 1000 People")
```



&nbsp;


```{r REGION_PERCENT, echo=FALSE, warning=FALSE}
PLOT <- ggplot(REGION_VALUES, aes(Date, AVG_7_PERCENT_POS))
PLOT + geom_line(aes(color = REGION, group = REGION)) + labs(y = "", title = "Prop. Positive Tests (7-day trailing average)") + ylim(0,.45)

```



&nbsp;



## Most Populous Counties


```{r NEW_AVG_COUNTY, echo=FALSE, warning=FALSE}

PLOT <- ggplot(COUNTY_VALUES_TOP_6_COUNTIES, aes(x = Date, y = AVG_7_CHANGE_POS))
PLOT + geom_line(aes(color = COUNTY, group = COUNTY)) + labs(y = "", title  = "New  Covid-19 Cases (7-day trailing average)")
```




```{r Largest_Counties_TOTAL, echo=FALSE, warning=FALSE}


PLOT <- ggplot(COUNTY_VALUES_TOP_6_COUNTIES, aes(Date, POSITIVE))
PLOT + geom_line(aes(color = COUNTY, group = COUNTY)) + scale_y_log10() + labs(y = "", title  = "Total Covid-19 Cases (Log Scale)")
```


&nbsp;


```{r Largest_Counties_PER, echo=FALSE, warning=FALSE}
PLOT <- ggplot(COUNTY_VALUES_TOP_6_COUNTIES, aes(Date, COUNTY_POSITIVE_PER_THOUS))

PLOT + geom_line(aes(color = COUNTY, group = COUNTY)) +  labs(y = "", title = "Total Covid-19 Cases per 1000 People")
```

&nbsp;


```{r Largest_Counties_PERCENT, echo=FALSE, warning=FALSE}
PLOT <- ggplot(COUNTY_VALUES_TOP_6_COUNTIES, aes(Date, AVG_7_PERCENT_POS))
PLOT + geom_line(aes(color = COUNTY, group = COUNTY)) + labs(y = "", title = "Prop. Positive Tests (7-day trailing average)") + ylim(0,.45)

```


## New Positive Cases in Select Counties

```{r NEW_TOTAL_SELECT, echo=FALSE, warning=FALSE}

PLOT <- ggplot(COUNTY_VALUES_SELECT, aes(Date))
PLOT  + geom_line(aes(y = AVG_7_CHANGE_POS), color = "black") + geom_point(aes(y = CHANGE_POS), fill = "red" ,color = "red") + geom_point(aes(y = MAX_POS), fill = "blue" ,color = "blue") + facet_wrap(~ COUNTY, ncol = 2, scales = "free")   +  labs(y = "", title  = "Daily CTY Cases (7-day AVG in black, today's value in blue)") 

```

## Avg. New Pos. Cases in Most Pop. Counties by Region

### North

```{r NEW_AVG_COUNTY_NORTH, echo=FALSE, warning=FALSE}

PLOT <- ggplot(COUNTY_VALUES_TOP_6_EACH_REGION[which(COUNTY_VALUES_TOP_6_EACH_REGION$REGION == "N"),], aes(x = Date, y = AVG_7_CHANGE_POS))
PLOT + geom_line(aes(color = COUNTY, group = COUNTY)) + labs(y = "", title  = "New  Covid-19 Cases (7-day trailing average)")
```


### Northeast

```{r NEW_AVG_COUNTY_NORTHEAST, echo=FALSE, warning=FALSE}

PLOT <- ggplot(COUNTY_VALUES_TOP_6_EACH_REGION[which(COUNTY_VALUES_TOP_6_EACH_REGION$REGION == "NE"),], aes(x = Date, y = AVG_7_CHANGE_POS))
PLOT + geom_line(aes(color = COUNTY, group = COUNTY)) + labs(y = "", title  = "New  Covid-19 Cases (7-day trailing average)")
```


### South

```{r NEW_AVG_COUNTY_SOUTH, echo=FALSE, warning=FALSE}

PLOT <- ggplot(COUNTY_VALUES_TOP_6_EACH_REGION[which(COUNTY_VALUES_TOP_6_EACH_REGION$REGION == "S"),], aes(x = Date, y = AVG_7_CHANGE_POS))
PLOT + geom_line(aes(color = COUNTY, group = COUNTY)) + labs(y = "", title  = "New  Covid-19 Cases (7-day trailing average)")
```

### Southeast


```{r NEW_AVG_COUNTY_SOUTHEAST, echo=FALSE, warning=FALSE}

PLOT <- ggplot(COUNTY_VALUES_TOP_6_EACH_REGION[which(COUNTY_VALUES_TOP_6_EACH_REGION$REGION == "SE"),], aes(x = Date, y = AVG_7_CHANGE_POS))
PLOT + geom_line(aes(color = COUNTY, group = COUNTY)) + labs(y = "", title  = "New  Covid-19 Cases (7-day trailing average)")
```

### West

```{r NEW_AVG_COUNTY_WEST, echo=FALSE, warning=FALSE}

PLOT <- ggplot(COUNTY_VALUES_TOP_6_EACH_REGION[which(COUNTY_VALUES_TOP_6_EACH_REGION$REGION == "W"),], aes(x = Date, y = AVG_7_CHANGE_POS))
PLOT + geom_line(aes(color = COUNTY, group = COUNTY)) + labs(y = "", title  = "New  Covid-19 Cases (7-day trailing average)")
```

## New Hospitalizations







```{r NEW_AVG_HOSP_REGION, echo=FALSE, warning=FALSE}

PLOT <- ggplot(REGION_VALUES, aes(x = Date, y = AVG_7_CHANGE_HOSP))
PLOT + geom_line(aes(color = REGION, group = REGION)) + labs(y = "", title  = "New Covid-19 Hospitalizations (7-day trailing average)") 
```







# {-}
By Michael J Zenz
&nbsp;
mail (at) mjzenz (dot) org
&nbsp;
[mjzenz.org](https://www.mjzenz.org)
&nbsp;
[github](https://github.com/mjzenz/WI-Covid)
&nbsp;
`r Sys.time()`


